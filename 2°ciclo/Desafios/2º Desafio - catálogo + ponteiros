#include <stdio.h>
#include<stdlib.h>
#include <locale.h>

struct dados{
    char nome[20];
    int quantidade;
    float preco;
    int mes;
    int ano;
};

int Menu() {
    int Resposta;
    system("cls");
    printf("**--------------- Bem vindo ao menu do nosso catálogo de filmes ---------------**\n\n");
    printf("1 - Entrada de dados do filme\n");
    printf("2 - Lista todos os dados na tela\n");
    printf("3 - Pesquisa um filme pelo nome completo e mostra todos os dados na tela\n");
    printf("4 - Pesquisar data de lançamento do filme (mês/ano)\n");
    printf("5 - Listar filmes por faixa de preço.\n");
    printf("6 - Altera quantidade em estoque (entrada e saída).\n");
    printf("7 - Altera preço de um filme pesquisado pelo nome completo");
    printf("8 - Altera todos os dados do filme pesquisado pelo nome completo");
    printf("9 - Exclui filme pesquisado pelo nome completo");
    printf("10 - Saída");
    printf("\n\nDigite a opção que deseja: ");
    scanf("%d",&Resposta);
    getchar();
    system("cls");
    return Resposta;
}

void Entrada(FILE *catalogo, struct dados filme){
    catalogo = fopen("catalogo.txt", "wb");

    printf("Digite o nome do filme: ");
    scanf("%s",&filme.nome);

    printf("Digite a quandidade disponivel: ");
    scanf("%d",&filme.quantidade);
    getchar();

    printf("Digite o preço do filme: ");
    scanf("%f",&filme.preco);

    printf("Digite o mês de laçamento: ");
    scanf("%d",&filme.mes);

    printf("Digite o ano de laçamento: ");
    scanf("%d",&filme.ano);
    fwrite(&filme, sizeof(filme),1,catalogo);

    fclose(catalogo);
}

void Listagem() {
}

int Pesquisa() {
}

void Estoque() {
}

void ALteraPreco() {
}

void AlteraTudo(){
}

void ExluiFilme(){

}
void Saida() {
    printf("Fechando o menu...\n\n");
    exit(0);
}
int main(void){
    int Resposta;
    struct dados filme;
    FILE *catalogo;
    setlocale(LC_ALL,"");

    catalogo = fopen("catalogo.txt", "r");

    if(catalogo == NULL) {
        printf("Não foi possível abrir o arquivo\n\n");
        exit(0);
    }
    else{
        fread(&filme,sizeof(filme),1,catalogo);
        fclose(catalogo);
        for(;;) {
            switch(Menu()) {
                case 1:
                    Entrada(catalogo, filme);
                break;

                case 10:
                    Saida();
                break;
            }
        }
    }
return 0;
}
